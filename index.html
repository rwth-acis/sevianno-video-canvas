<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sevianno Video Canvas</title>

    <!-- Importing Web Component's Polyfill -->
    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>
	
	

    <!-- Importing Custom Elements -->
	<link rel="import" href="sevianno-video-canvas.html">
	<link rel="import" href="bower_components/polymer/polymer.html">
</head>
<body unresolved>


		<!--<canvas id="ca" height="400" width="700"style="border : 1px solid rgb(170, 170, 170);  left: 10px; top: 10px; -moz-user-select: none; cursor: crosshair;"></canvas>
		<video id="video" width={{widthVideo}} height={{heightVideo}} preload={{preloadVideo}} src={{sourceVideo}} ></video> -->	


    <!-- Using Custom Elements -->
	<sevianno-video-canvas
		id = "seviannoVideoCanvas" 
		paddingcanvas="100" 
		sourcevideo="http://golovin.de/ba/parking.mp4"  
		widthvideo="640" 
		heightvideo="300" 
		preloadvideo="auto" 
		timevideo="10"
		 >
	</sevianno-video-canvas>


	<div id="video-controls">
		<button onclick="changeTime();">Go To second 5</button>
		<button onclick="getJSONindex();">Get JSON </button>
		<button onclick="setJSONindex();">Set JSON </button>
		<button onclick="setAttributesVideoCanvas();">Set Attributes JSON </button>
	</div>
	<!--<script>
		var canvas = null;
		var video = this.video = this.$.video;
		canvas = this.__canvas = new fabric.Canvas("c", {
			isDrawingMode: true
		});
			canvas.freeDrawingBrush.width = 10;
			canvas.freeDrawingBrush.color = '#FF0000';
			console.log(canvas);
		
	</script>-->
	<script>
	var component = document.getElementById("seviannoVideoCanvas");
	document.addEventListener('video-canvas-get-JSON', function(e) {
        console.log(e.detail.canvas);
		//setJSONindex(e.detail.canvas);
    });
	
	function changeTime() {
	component.setAttribute('timevideo', 5);
	}
	
	function getJSONindex() {
	component.getJSON();
	}
	
	function setJSONindex(canvas){
	var canvasJson =[{"objects":[{"type":"path","originX":"center","originY":"center","left":377.35,"top":210.16,"width":468.39,"height":59.76,"fill":null,"stroke":"#FF0000","strokeWidth":10,"strokeDashArray":null,"strokeLineCap":"round","strokeLineJoin":"round","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","path":[["M",143.1579572446556,206.17529880478088],["Q",143.1579572446556,206.17529880478088,143.6579572446556,206.17529880478088],["Q",144.1579572446556,206.17529880478088,144.40676959619952,206.17529880478088],["Q",144.65558194774346,206.17529880478088,145.1543942992874,206.17529880478088],["Q",145.65320665083135,206.17529880478088,147.14964370546318,205.1792828685259],["Q",148.646080760095,204.18326693227093,151.14014251781472,203.18725099601596],["Q",153.63420427553444,202.19123505976097,159.12114014251782,201.19521912350598],["Q",164.6080760095012,200.199203187251,171.09263657957246,198.20717131474103],["Q",177.5771971496437,196.21513944223108,188.0522565320665,194.22310756972112],["Q",198.52731591448932,192.23107569721117,216.9833729216152,190.23904382470118],["Q",235.43942992874108,188.24701195219123,248.90736342042754,186.75298804780874],["Q",262.37529691211404,185.25896414342628,276.34204275534444,184.2629482071713],["Q",290.30878859857484,183.26693227091633,308.7648456057007,182.76892430278883],["Q",327.2209026128266,182.27091633466136,342.6840855106888,181.27490039840637],["Q",358.14726840855104,180.27888446215138,372.11401425178144,180.27888446215138],["Q",386.0807600950119,180.27888446215138,393.56294536817103,180.27888446215138],["Q",401.04513064133016,180.27888446215138,410.0237529691211,180.27888446215138],["Q",419.00237529691213,180.27888446215138,427.9809976247031,180.27888446215138],["Q",436.95961995249405,180.27888446215138,444.94061757719714,181.77290836653384],["Q",452.92161520190024,183.26693227091633,463.396674584323,184.2629482071713],["Q",473.87173396674586,185.25896414342628,478.85985748218525,187.25099601593627],["Q",483.8479809976247,189.24302788844622,491.8289786223278,192.72908366533864],["Q",499.8099762470309,196.21513944223108,504.29928741092635,198.70517928286853],["Q",508.78859857482183,201.19521912350598,516.7695961995249,206.17529880478088],["Q",524.7505938242281,211.15537848605578,533.729216152019,215.6374501992032],["Q",542.70783847981,220.1195219123506,547.1971496437054,223.60557768924303],["Q",551.686460807601,227.09163346613545,556.6745843230403,230.0796812749004],["Q",561.6627078384798,233.06772908366534,565.1543942992874,234.56175298804783],["Q",568.6460807600951,236.0557768924303,570.142517814727,237.05179282868528],["Q",571.6389548693587,238.04780876494024,572.6365795724466,238.54581673306774],["Q",573.6342042755344,239.0438247011952,575.1306413301663,239.0438247011952],["Q",576.6270783847981,239.0438247011952,577.624703087886,239.5418326693227],["Q",578.6223277909738,240.0398406374502,579.6199524940617,240.0398406374502],["Q",580.6175771971497,240.0398406374502,582.1140142517816,240.0398406374502],["Q",583.6104513064133,240.0398406374502,585.1068883610451,240.0398406374502],["Q",586.603325415677,240.0398406374502,587.6009501187648,240.0398406374502],["Q",588.5985748218527,240.0398406374502,590.0950118764845,239.5418326693227],["Q",591.5914489311164,239.0438247011952,593.5866983372921,239.0438247011952],["Q",595.5819477434679,239.0438247011952,597.0783847980997,238.54581673306774],["Q",598.5748218527316,238.04780876494024,601.5676959619952,237.05179282868528],["Q",604.5605700712589,236.0557768924303,607.0546318289786,235.0597609561753],["Q",609.5486935866983,234.06374501992033,610.5463182897862,233.06772908366534],["L",611.5439429928741,232.07171314741035]],"pathOffset":{"x":377.3509501187649,"y":210.1593625498008}}],"background":""}]
	component.setJSON(canvasJson[0]);
	}
	
	function getJSONComponent(event)
	{
	alert("getJSON called");
	console.log(event.detail.canvas);
	}
	
	
	//
	function setAttributesVideoCanvas()
	{
	var input ='{"paddingcanvas":"20","sourcevideo":"http://html5demos.com/assets/dizzy.mp4","widthvideo":"640","heightvideo":"300","preloadvideo":"auto","timevideo":"7"}';
	var inputJson = JSON.parse(input);
	console.log(inputJson);
	/*Object.keys(inputJson).forEach(function(k) {
		//component.setAttribute(k,inputJson.k);
		console.log(k);
		console.log(inputJson.k);
		
		}); */
		
		for(j in inputJson){

        var sub_key = j;
        var sub_val = inputJson[j];
        console.log(sub_key);
		console.log(sub_val);
		//sub_key = "'"+sub_key+"'";
		component.setAttribute(sub_key,sub_val);
		}
	}
	
	
	</script>
</body>
</html>
